---
import BaseLayout from '../layouts/BaseLayout.astro';
import { quotes, authors, topics, categories } from '../scripts/data-loader.js';

// SEO
const title = 'Search Success Quotes - Thousands of Inspirational Quotes | Success Quotes';
const description = 'Search and discover thousands of motivational quotes from the world\'s most successful people. Browse by author, topic, or category. Find the perfect quote to inspire your success.';

const totalQuotes = quotes.length;
const totalAuthors = authors.length;
const totalTopics = topics.length;

// Schema.org structured data
const schemaData = {
  "@context": "https://schema.org",
  "@type": "WebPage",
  "name": "Success Quotes Collection",
  "description": description,
  "url": "https://www.successquotes.co/quotes",
  "mainEntity": {
    "@type": "ItemList",
    "numberOfItems": totalQuotes,
    "itemListElement": quotes.slice(0, 10).map((quote, index) => ({
      "@type": "ListItem",
      "position": index + 1,
      "item": {
        "@type": "Quotation",
        "text": quote.quote,
        "author": {
          "@type": "Person",
          "name": quote.author
        }
      }
    }))
  }
};
---

<BaseLayout 
  title={title}
  description={description}
  schemaData={schemaData}
>
  <div class="quote-container" style="max-width: 1000px;">
    <!-- Hero Section -->
    <div style="text-align: center; margin-bottom: 60px;">
      <h1 style="font-size: 3.5em; color: white; margin-bottom: 20px; font-family: 'Instrument Serif', serif;">
        Discover Success Quotes
      </h1>
      <p style="font-size: 1.3em; color: #888; margin-bottom: 30px;">
        {totalQuotes.toLocaleString()} quotes from {totalAuthors} successful people
      </p>
      
      <!-- Search Bar -->
      <div style="max-width: 600px; margin: 0 auto;">
        <input 
          type="text" 
          id="searchInput"
          placeholder="Search quotes, authors, or topics..."
          style="width: 100%; padding: 18px 24px; font-size: 1.1em; border-radius: 12px; border: 2px solid rgba(255, 255, 255, 0.2); background: rgba(255, 255, 255, 0.05); color: white; outline: none;"
          onkeyup="filterQuotes()"
        />
      </div>
    </div>
    
    <!-- Quick Actions -->
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 60px;">
      <a href="/daily" class="btn btn-primary" style="text-align: center; padding: 20px;">
        <div style="font-size: 2em; margin-bottom: 10px;">ðŸ“…</div>
        <div style="font-size: 1.1em;">Quote of the Day</div>
      </a>
      <a href="/random" class="btn btn-primary" style="text-align: center; padding: 20px;">
        <div style="font-size: 2em; margin-bottom: 10px;">ðŸŽ²</div>
        <div style="font-size: 1.1em;">Random Quote</div>
      </a>
    </div>
    
    <!-- Browse by Topic -->
    <section style="margin-bottom: 60px;">
      <h2 class="section-title">Browse by Topic</h2>
      <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 15px;">
        {topics.slice(0, 20).map(topic => {
          const topicQuotes = quotes.filter(q => q.topic === topic);
          const slug = topicQuotes[0]?.topicSlug;
          return (
            <a 
              href={`/topic/${slug}`}
              style="padding: 20px; background: rgba(255, 255, 255, 0.05); border-radius: 12px; text-decoration: none; transition: all 0.3s; text-align: center;"
              onmouseover="this.style.background='rgba(255, 255, 255, 0.1)'; this.style.transform='translateY(-4px)';"
              onmouseout="this.style.background='rgba(255, 255, 255, 0.05)'; this.style.transform='translateY(0)';"
            >
              <div style="color: white; font-weight: 600; margin-bottom: 5px;">
                {topic}
              </div>
              <div style="color: #888; font-size: 0.9em;">
                {topicQuotes.length} quotes
              </div>
            </a>
          );
        })}
      </div>
      {topics.length > 20 && (
        <div style="text-align: center; margin-top: 20px;">
          <button 
            onclick="showAllTopics()"
            class="btn btn-secondary"
          >
            Show All {topics.length} Topics
          </button>
        </div>
      )}
    </section>
    
    <!-- Browse by Author -->
    <section style="margin-bottom: 60px;">
      <h2 class="section-title">Popular Authors</h2>
      <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 15px;">
        {authors.slice(0, 24).map(author => {
          const authorQuotes = quotes.filter(q => q.author === author);
          const slug = authorQuotes[0]?.authorSlug;
          return (
            <a 
              href={`/author/${slug}`}
              style="padding: 15px; background: rgba(255, 255, 255, 0.05); border-radius: 8px; text-decoration: none; transition: all 0.3s; text-align: center;"
              onmouseover="this.style.background='rgba(255, 255, 255, 0.1)';"
              onmouseout="this.style.background='rgba(255, 255, 255, 0.05)';"
            >
              <div style="color: white; font-size: 0.95em;">
                {author}
              </div>
              <div style="color: #888; font-size: 0.85em; margin-top: 5px;">
                {authorQuotes.length} quotes
              </div>
            </a>
          );
        })}
      </div>
    </section>
    
    <!-- Browse by Category -->
    <section style="margin-bottom: 60px;">
      <h2 class="section-title">Browse by Category</h2>
      <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); gap: 15px;">
        {categories.map(category => {
          const categoryQuotes = quotes.filter(q => q.category === category);
          const slug = categoryQuotes[0]?.categorySlug;
          return (
            <a 
              href={`/category/${slug}`}
              style="padding: 20px; background: linear-gradient(135deg, rgba(102, 126, 234, 0.2) 0%, rgba(118, 75, 162, 0.2) 100%); border-radius: 12px; text-decoration: none; transition: all 0.3s; text-align: center;"
              onmouseover="this.style.transform='scale(1.05)';"
              onmouseout="this.style.transform='scale(1)';"
            >
              <div style="color: white; font-weight: 600; margin-bottom: 5px;">
                {category}
              </div>
              <div style="color: #ccc; font-size: 0.9em;">
                {categoryQuotes.length} quotes
              </div>
            </a>
          );
        })}
      </div>
    </section>
    
    <!-- CTA -->
    <div style="text-align: center; margin-top: 80px; padding: 50px 30px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 16px;">
      <h3 style="font-size: 2.2em; color: white; margin-bottom: 20px;">
        Get Daily Inspiration
      </h3>
      <p style="color: rgba(255, 255, 255, 0.95); font-size: 1.2em; margin-bottom: 30px; max-width: 600px; margin-left: auto; margin-right: auto;">
        Access {totalQuotes.toLocaleString()}+ curated success quotes from the world's most successful people. Available on your iPhone.
      </p>
      <a 
        href="https://apps.apple.com/gb/app/success-quotes/id6752120038?itscg=30200&itsct=apps_box_link&mttnsubad=6752120038"
        class="btn btn-primary"
        style="background: white; color: #667eea; font-size: 1.1em; padding: 16px 32px;"
      >
        Download Success Quotes App
      </a>
    </div>
  </div>
  
  <script>
    const quotesData = [];
    
    function filterQuotes() {
      const input = document.getElementById('searchInput');
      const query = input.value.toLowerCase().trim();
      
      if (query.length < 2) return;
      
      // Redirect to search results (we'll implement this with query params)
      window.location.href = `/search?q=${encodeURIComponent(query)}`;
    }
    
    // Allow Enter key to trigger search
    document.getElementById('searchInput')?.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') {
        filterQuotes();
      }
    });
    
    function showAllTopics() {
      // Expand to show all topics
      alert('All topics view coming soon!');
    }
  </script>
</BaseLayout>

